\documentclass[12pt, dvisvgm]{beamer}

\mode<presentation>
{%
	\usetheme[alternativetitlepage=bild]{Rub}
	\titlegraphic{data/flickr/img-bg.jpg}

	\setbeamercovered{transparent}
}
\usepackage{rubfonts2009}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[babel,english=american]{csquotes}

\usepackage[scaled=.90]{helvet}
\usepackage{courier}
\usepackage[T1]{fontenc}

\usepackage{amsmath}
\usepackage{mathptmx}
\usepackage{todonotes}

\usepackage{etoolbox,siunitx}
\sisetup{table-format=-1.0, detect-weight, detect-shape, detect-mode}

\usepackage{tikz}
\usetikzlibrary{arrows, shapes, shapes.multipart, decorations, spy, shadows}
\tikzstyle{startstop} = [ellipse, rounded corners, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
\tikzstyle{process} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=green!30]
\tikzstyle{plainnode} = [minimum width=2cm, minimum height=1cm, align=center, draw=none]
\tikzstyle{arrow} = [thick,->,>=stealth]

\makeatletter
% Keys to support piece-wise uncovering of elements in TikZ pictures:
% \node[visible on=<2->](foo){Foo}
% \node[visible on=<{2,4}>](bar){Bar}   % put braces around comma expressions
%
% Internally works by setting opacity=0 when invisible, which has the
% adavantage (compared to \node<2->(foo){Foo} that the node is always there, hence
% always consumes space that (foo) is always available.
%
% The actual command that implements the invisibility can be overriden
% by altering the style invisible. For instance \tikzsset{invisible/.style={opacity=0.2}}
% would dim the "invisible" parts. Alternatively, the color might be set to white, if the
% output driver does not support transparencies (e.g., PS)
\tikzset{%
	invisible/.style={opacity=0},
	visible on/.style={alt={#1{}{invisible}}},
	alt/.code args={<#1>#2#3}{%
		\alt<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}} % \pgfkeysalso doesn't change the path
	},
}
\tikzset{%
  path picture/.code=\tikz@addmode{\def\tikz@path@picture{#1\tikz@path@picture@extra}},
  path picture extra/.code={\def\tikz@path@picture@extra{#1}}
}
\let\tikz@path@picture@extra\pgfutil@empty
\makeatother

\usepackage{pgfplots}
\pgfplotsset{%
		compat=newest,
		cycle list={mark=triangle,color=red!75!black\\
					mark=square,color=green!75!black\\
					mark=|,color=white\\
					mark=o,color=blue\\
					mark=pentagon,color=purple\\
					mark=x,color=yellow!50!orange\\
					mark=x,color=brown!75!black\\
					mark=x,color=black!50!white\\},
		every axis plot post/.append style={thick},
		ignore legend/.style={every axis legend/.code={\renewcommand\addlegendentry[2][]{}}}
		}

\newcommand{\blfootnote}[1]{%
	\begingroup
	\renewcommand\thefootnote{}\footnote{#1}%
	\addtocounter{footnote}{-1}%
	\endgroup
}

\newcommand{\DrawPresentPLayer}[2]{%
	\draw ( 0.2,#1) -- ( 0.2,#2); \draw ( 0.4,#1) -- ( 6.2,#2);
	\draw ( 0.6,#1) -- (12.2,#2); \draw ( 0.8,#1) -- (18.2,#2);
	\draw ( 1.7,#1) -- ( 0.4,#2); \draw ( 1.9,#1) -- ( 6.4,#2);
	\draw ( 2.1,#1) -- (12.4,#2); \draw ( 2.3,#1) -- (18.4,#2);
	\draw ( 3.2,#1) -- ( 0.6,#2); \draw ( 3.4,#1) -- ( 6.6,#2);
	\draw ( 3.6,#1) -- (12.6,#2); \draw ( 3.8,#1) -- (18.6,#2);
	\draw ( 4.7,#1) -- ( 0.8,#2); \draw ( 4.9,#1) -- ( 6.8,#2);
	\draw ( 5.1,#1) -- (12.8,#2); \draw ( 5.3,#1) -- (18.8,#2);
	\draw ( 6.2,#1) -- ( 1.7,#2); \draw ( 6.4,#1) -- ( 7.7,#2);
	\draw ( 6.6,#1) -- (13.7,#2); \draw ( 6.8,#1) -- (19.7,#2);
	\draw ( 7.7,#1) -- ( 1.9,#2); \draw ( 7.9,#1) -- ( 7.9,#2);
	\draw ( 8.1,#1) -- (13.9,#2); \draw ( 8.3,#1) -- (19.9,#2);
	\draw ( 9.2,#1) -- ( 2.1,#2); \draw ( 9.4,#1) -- ( 8.1,#2);
	\draw ( 9.6,#1) -- (14.1,#2); \draw ( 9.8,#1) -- (20.1,#2);
	\draw (10.7,#1) -- ( 2.3,#2); \draw (10.9,#1) -- ( 8.3,#2);
	\draw (11.1,#1) -- (14.3,#2); \draw (11.3,#1) -- (20.3,#2);
	\draw (12.2,#1) -- ( 3.2,#2); \draw (12.4,#1) -- ( 9.2,#2);
	\draw (12.6,#1) -- (15.2,#2); \draw (12.8,#1) -- (21.2,#2);
	\draw (13.7,#1) -- ( 3.4,#2); \draw (13.9,#1) -- ( 9.4,#2);
	\draw (14.1,#1) -- (15.4,#2); \draw (14.3,#1) -- (21.4,#2);
	\draw (15.2,#1) -- ( 3.6,#2); \draw (15.4,#1) -- ( 9.6,#2);
	\draw (15.6,#1) -- (15.6,#2); \draw (15.8,#1) -- (21.6,#2);
	\draw (16.7,#1) -- ( 3.8,#2); \draw (16.9,#1) -- ( 9.8,#2);
	\draw (17.1,#1) -- (15.8,#2); \draw (17.3,#1) -- (21.8,#2);
	\draw (18.2,#1) -- ( 4.7,#2); \draw (18.4,#1) -- (10.7,#2);
	\draw (18.6,#1) -- (16.7,#2); \draw (18.8,#1) -- (22.7,#2);
	\draw (19.7,#1) -- ( 4.9,#2); \draw (19.9,#1) -- (10.9,#2);
	\draw (20.1,#1) -- (16.9,#2); \draw (20.3,#1) -- (22.9,#2);
	\draw (21.2,#1) -- ( 5.1,#2); \draw (21.4,#1) -- (11.1,#2);
	\draw (21.6,#1) -- (17.1,#2); \draw (21.8,#1) -- (23.1,#2);
	\draw (22.7,#1) -- ( 5.3,#2); \draw (22.9,#1) -- (11.3,#2);
	\draw (23.1,#1) -- (17.3,#2); \draw (23.3,#1) -- (23.3,#2);
}


\newcommand{\DrawPresentStructure}[1]{%
	\def \maxround{#1}
	\def \roundH{5}
	\pgfmathparse{#1 - 1}

	\foreach \round in {1,...,\pgfmathresult}{%
		\def \TEST{\roundH*\maxround-\roundH*\round+0.5}
		\def \BEST{\roundH*\maxround-\roundH*\round-\roundH+2.5}
		%Sboxes with input and output lines and xor for the key
		\foreach \i in {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15}{%Sbox
			\draw[color=black] (1.5*\i,\roundH*\maxround-\roundH*\round+1)
				rectangle (1.5*\i+1,\roundH*\maxround-\roundH*\round+2);
			\node at (1.5*\i+0.5,\roundH*\maxround-\roundH*\round+1.5) {S};

			%Input and output lines
			\foreach \j in {1,2,3,4}{%output lines
				\draw (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+1) -- (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+0.5);

				%input lines
				\draw (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+2) -- (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+2.5);

				%XOR
				\draw (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+2.25) circle (0.1);
				\draw (1.5*\i+0.2*\j-0.1,\roundH*\maxround-\roundH*\round+2.25) -- (1.5*\i+0.2*\j+0.1,\roundH*\maxround-\roundH*\round+2.25);
			}
		}

		%The P-layer
		\DrawPresentPLayer{\TEST}{\BEST}
	}

	\def \round{#1}
	%Sboxes with input and output lines and xor for the key
	\foreach \i in {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15}{%Sbox
		\draw[color=black] (1.5*\i,\roundH*\maxround-\roundH*\round+1) rectangle (1.5*\i+1,\roundH*\maxround-\roundH*\round+2);
		\node at (1.5*\i+0.5,\roundH*\maxround-\roundH*\round+1.5) {S};

		%Input and output lines
		\foreach \j in {1,2,3,4}{%output lines
			\draw (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+1) -- (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+0.5);

			%input lines
			\draw (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+2) -- (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+2.5);

			%XOR
			\draw (1.5*\i+0.2*\j,\roundH*\maxround-\roundH*\round+2.25) circle (0.1);
			\draw (1.5*\i+0.2*\j-0.1,\roundH*\maxround-\roundH*\round+2.25) -- (1.5*\i+0.2*\j+0.1,\roundH*\maxround-\roundH*\round+2.25);
		}
	}
}

\newcommand{\present}{\textsc{Present}}
\newcommand{\xor}{\oplus}

\title[Distribution of Linear Biases in \present{}]{Distribution of Linear Biases in \present{}}
\subtitle{}
\author[Friedrich~Wiemer]{Friedrich~Wiemer}
\institute{%
	EMSEC/SHA Seminar\\
	Horst GÃ¶rtz Institute for IT-Security\\
	Ruhr University Bochum
}

\date{16. July 2015}

\AtBeginSection[]

\begin{document}

\begin{frame}
	\titlepage{}
\end{frame}

\begin{frame}{Outline}
	\tableofcontents
\end{frame}

\input{slides.tex}

\begin{frame}{Questions?}{Thank you for your attention!}
	\begin{figure}[!htb]
		\includegraphics[height=50mm]{data/flickr/questionmark.png}\blfootnote{\scriptsize Mainboard \& Questionmark Images: flickr}
	\end{figure}
\end{frame}

\end{document}
